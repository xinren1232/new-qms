# QMS-AI阿里云生产环境配置
# 基于您的服务器: 47.108.152.16

# ================================
# 基础配置
# ================================
NODE_ENV=production
PROJECT_NAME=qms-ai
DOMAIN=47.108.152.16
# 如果您有域名，请替换为: your-domain.com

# ================================
# 阿里云服务器配置
# ================================
SERVER_IP=47.108.152.16
SSH_USER=root
SSH_PORT=22

# ================================
# 数据库配置 (方案A: 本地MySQL)
# ================================
# 使用Docker容器内的MySQL数据库
DB_HOST=qms-mysql
DB_PORT=3306
DB_NAME=qms_ai
DB_USER=qms_admin
DB_PASSWORD=Zxylsy99_mysql

# 兼容性配置
ALIYUN_RDS_HOST=${DB_HOST}
ALIYUN_RDS_PORT=${DB_PORT}
ALIYUN_RDS_DATABASE=${DB_NAME}
ALIYUN_RDS_USER=${DB_USER}
ALIYUN_RDS_PASSWORD=${DB_PASSWORD}

# ================================
# Redis缓存配置 (方案A: 本地Redis)
# ================================
# 使用Docker容器内的Redis缓存
REDIS_HOST=qms-redis
REDIS_PORT=6379
REDIS_PASSWORD=Zxylsy99_redis
REDIS_DB=0

# 兼容性配置
ALIYUN_REDIS_HOST=${REDIS_HOST}
ALIYUN_REDIS_PORT=${REDIS_PORT}
ALIYUN_REDIS_PASSWORD=${REDIS_PASSWORD}

# ================================
# 阿里云服务配置 (可选)
# ================================
# 如果您需要使用阿里云OSS等服务，请提供:
ALIYUN_ACCESS_KEY_ID=your_access_key_id_here
ALIYUN_ACCESS_KEY_SECRET=your_access_key_secret_here
ALIYUN_REGION=cn-hangzhou

# ================================
# AI服务配置 (使用现有配置)
# ================================
# 内部模型配置（Transsion AI）
TRANSSION_API_KEY=sk_a264854a38dc034077c23f5951285907e6c40d1b4843f46f95e5f31
INTERNAL_AI_API_KEY=${TRANSSION_API_KEY}
INTERNAL_AI_BASE_URL=https://hk-intra-paas.transsion.com/tranai-proxy/v1

# 外部模型配置（DeepSeek）
DEEPSEEK_API_KEY=sk-cab797574abf4288bcfaca253191565d
EXTERNAL_AI_API_KEY=${DEEPSEEK_API_KEY}
EXTERNAL_AI_BASE_URL=https://api.deepseek.com

# 兼容性配置
AI_API_KEY=${TRANSSION_API_KEY}
AI_BASE_URL=${INTERNAL_AI_BASE_URL}

# ================================
# 安全配置
# ================================
# JWT密钥（生产环境强密钥）
JWT_SECRET=qms_ai_production_jwt_secret_key_2025_aliyun_47_108_152_16
ENCRYPTION_KEY=qms_ai_encryption_key_2025_32_chars_aliyun_server

# CORS配置
CORS_ORIGIN=http://47.108.152.16,https://47.108.152.16

# ================================
# 监控配置
# ================================
# Grafana管理员配置
GRAFANA_USER=admin
GRAFANA_PASSWORD=qms_grafana_admin_2025

# ================================
# 性能优化配置
# ================================
# Node.js内存限制
NODE_OPTIONS=--max-old-space-size=256

# 数据库连接池
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_TIMEOUT=30000

# Redis连接配置
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10
REDIS_TIMEOUT=5000

# 缓存TTL配置（秒）
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_CONVERSATIONS=1800
CACHE_TTL_STATS=300
CACHE_TTL_MODELS=3600

# ================================
# 日志配置
# ================================
LOG_LEVEL=info
LOG_FILE=/app/logs/qms-ai.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=5

# ================================
# 文件上传配置
# ================================
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=.txt,.md,.doc,.docx,.pdf
UPLOAD_PATH=/app/uploads

# ================================
# 健康检查配置
# ================================
HEALTH_CHECK_INTERVAL=30000
METRICS_ENABLED=true

# ================================
# 邮件配置（可选）
# ================================
SMTP_HOST=smtp.aliyun.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=your_email@aliyun.com
SMTP_PASSWORD=your_email_password_here

# ================================
# SSL证书配置
# ================================
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem

# ================================
# 负载均衡配置
# ================================
LB_ALGORITHM=round_robin
LB_HEALTH_CHECK=true
LB_TIMEOUT=30s

# ================================
# 开发调试配置（生产环境设为false）
# ================================
DEBUG=false
VERBOSE_LOGGING=false
API_RATE_LIMIT=true
API_RATE_LIMIT_MAX=1000
API_RATE_LIMIT_WINDOW=900000
