# ğŸŒ QMS-AIç³»ç»Ÿç«¯å£è®¾è®¡è§„èŒƒ (v3.0)

## ğŸ“‹ ç«¯å£åˆ†é…æ€»è§ˆ - å½“å‰å®é™…è¿è¡ŒçŠ¶æ€

### ğŸ¯ è®¾è®¡åŸåˆ™
- **ç«¯å£èŒƒå›´åˆ†ç¦»**: å‰ç«¯(8080-8099) | åç«¯(3000-3999) | åŸºç¡€è®¾æ–½(6000-6999)
- **æœåŠ¡éš”ç¦»**: æ¯ä¸ªæœåŠ¡ç‹¬å ç«¯å£ï¼Œé¿å…å†²çª
- **æ˜“äºè®°å¿†**: ç«¯å£å·ä¸æœåŠ¡åŠŸèƒ½ç›¸å…³è”
- **æ‰©å±•æ€§**: é¢„ç•™ç«¯å£ç”¨äºæœªæ¥æœåŠ¡æ‰©å±•

---

## ğŸ”§ åç«¯æœåŠ¡ç«¯å£ (3000-3999)

| ç«¯å£ | æœåŠ¡åç§° | æ–‡ä»¶å | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|--------|----------|------|
| **3004** | AIèŠå¤©æœåŠ¡ | `chat-service.js` | 8ä¸ªAIæ¨¡å‹èŠå¤©åŠŸèƒ½ | âœ… è¿è¡Œä¸­ |
| 3005 | é«˜çº§åŠŸèƒ½æœåŠ¡ | `advanced-features-service.js` | æ•°æ®å¯¼å‡ºã€åˆ†æç­‰ | ğŸ”„ é¢„ç•™ |
| 3006 | æ•°æ®åº“æœåŠ¡ | `database-service.js` | æ•°æ®åº“è¿æ¥æ± ç®¡ç† | ğŸ”„ é¢„ç•™ |
| 3007 | æ–‡ä»¶æœåŠ¡ | `file-service.js` | æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ | ğŸ”„ é¢„ç•™ |
| 3008 | é€šçŸ¥æœåŠ¡ | `notification-service.js` | æ¶ˆæ¯æ¨é€ | ğŸ”„ é¢„ç•™ |
| 3009 | APIç½‘å…³ | `api-gateway.js` | ç»Ÿä¸€APIå…¥å£ | ğŸ”„ é¢„ç•™ |

---

## ğŸŒ å‰ç«¯å’Œè®¤è¯ç«¯å£ (8080-8099)

| ç«¯å£ | æœåŠ¡åç§° | æ–‡ä»¶å | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|--------|----------|------|
| **8081** | åº”ç”¨ç«¯å‰ç«¯ | Vue 3 | ä¸»è¦ä¸šåŠ¡æ“ä½œç•Œé¢ | âœ… è¿è¡Œä¸­ |
| **8082** | é…ç½®ä¸­å¿ƒåç«¯ | `lightweight-config-service.js` | è½»é‡çº§é…ç½®ç®¡ç†æœåŠ¡ | âœ… è¿è¡Œä¸­ |
| 8083 | é…ç½®ç«¯å‰ç«¯ | Vue 2 | ç³»ç»Ÿé…ç½®ç®¡ç†ç•Œé¢ | ğŸ”„ é¢„ç•™ |
| **8084** | è®¤è¯æœåŠ¡ | `auth-service.js` | ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç† | âœ… è¿è¡Œä¸­ |
| 8085 | APIç½‘å…³ | `api-gateway.js` | ç»Ÿä¸€APIå…¥å£ | ğŸ”„ é¢„ç•™ |
| 8086 | è´Ÿè½½å‡è¡¡å™¨ | `load-balancer.js` | è¯·æ±‚åˆ†å‘ | ğŸ”„ é¢„ç•™ |
| 8087 | æœåŠ¡å‘ç° | `service-discovery.js` | æœåŠ¡æ³¨å†Œä¸å‘ç° | ğŸ”„ é¢„ç•™ |
| 8088 | ç›‘æ§æœåŠ¡ | `monitoring-service.js` | ç³»ç»Ÿç›‘æ§ | ğŸ”„ é¢„ç•™ |
| 8089 | æ—¥å¿—æœåŠ¡ | `logging-service.js` | æ—¥å¿—æ”¶é›† | ğŸ”„ é¢„ç•™ |

---

## ğŸ—„ï¸ åŸºç¡€è®¾æ–½ç«¯å£ (6000-6999)

| ç«¯å£ | æœåŠ¡åç§° | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|----------|------|
| **6380** | Redisç¼“å­˜ | æ•°æ®ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ | âœ… è¿è¡Œä¸­ |
| 6379 | Redisé»˜è®¤ | ç³»ç»Ÿé»˜è®¤Redisç«¯å£ | ğŸ”„ é¢„ç•™ |
| 6432 | PostgreSQL | å…³ç³»å‹æ•°æ®åº“ | ğŸ”„ é¢„ç•™ |
| 6433 | MongoDB | æ–‡æ¡£æ•°æ®åº“ | ğŸ”„ é¢„ç•™ |

---

## ğŸ—„ï¸ æ•°æ®åº“ç«¯å£ (5000-5999)

| ç«¯å£ | æœåŠ¡åç§° | ç±»å‹ | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|------|----------|------|
| 5432 | PostgreSQL | å…³ç³»æ•°æ®åº“ | ä¸»æ•°æ®å­˜å‚¨ | ğŸ”„ å¯é€‰ |
| 6379 | Redis | ç¼“å­˜æ•°æ®åº“ | ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ | ğŸ”„ å¯é€‰ |
| 3306 | MySQL | å…³ç³»æ•°æ®åº“ | å¤‡ç”¨æ•°æ®å­˜å‚¨ | ğŸ”„ å¯é€‰ |

---

## ğŸ” ç«¯å£å†²çªæ£€æµ‹å’Œè§£å†³

### ğŸ› ï¸ æ£€æµ‹å‘½ä»¤
```bash
# æ£€æŸ¥æ‰€æœ‰QMSç«¯å£
netstat -ano | findstr ":3004 :3005 :3009 :8080 :8082 :8073 :8084"

# æ£€æŸ¥ç‰¹å®šç«¯å£
netstat -ano | findstr ":8073"

# æŸ¥çœ‹è¿›ç¨‹è¯¦æƒ…
tasklist | findstr "node.exe"
```

### ğŸš¨ å†²çªè§£å†³æ­¥éª¤
1. **è¯†åˆ«å†²çªè¿›ç¨‹**
   ```bash
   netstat -ano | findstr ":ç«¯å£å·"
   ```

2. **åœæ­¢å†²çªè¿›ç¨‹**
   ```bash
   taskkill /f /pid è¿›ç¨‹ID
   ```

3. **éªŒè¯ç«¯å£é‡Šæ”¾**
   ```bash
   netstat -ano | findstr ":ç«¯å£å·"
   ```

---

## ğŸ”„ ç«¯å£å˜æ›´å†å²

### v3.0 (å½“å‰ç‰ˆæœ¬ - 2025-08-06)
- **Redis**: 6379 â†’ 6380 (é¿å…ä¸ç³»ç»ŸRediså†²çª)
- **åº”ç”¨ç«¯å‰ç«¯**: 8080 â†’ 8081 (é¿å…ç«¯å£å†²çª)
- **é…ç½®ä¸­å¿ƒ**: 3003 â†’ 8082 (ç»Ÿä¸€ä¸ºè½»é‡çº§é…ç½®æœåŠ¡)
- **é…ç½®ç«¯å‰ç«¯**: 8072 â†’ 8083 (é¢„ç•™ï¼Œå½“å‰æœªå¯åŠ¨)

### v2.0 (å†å²ç‰ˆæœ¬)
- **é…ç½®ç«¯**: 8072 â†’ 8073 (é¿å…ä¸å…¶ä»–æœåŠ¡å†²çª)
- **åº”ç”¨ç«¯**: 8080 â†’ 8082 (è®©å‡º8080ç»™APIç½‘å…³)
- **é…ç½®ä¸­å¿ƒ**: 3003 â†’ 3005 (ç»Ÿä¸€åç«¯ç«¯å£èŒƒå›´)

### v1.0 (å†å²ç‰ˆæœ¬)
- é…ç½®ç«¯: 8072
- åº”ç”¨ç«¯: 8080
- é…ç½®ä¸­å¿ƒ: 3003
- AIèŠå¤©: 3004

---

## ğŸš€ æœåŠ¡å¯åŠ¨é¡ºåº (å½“å‰å®é™…)

### ğŸ“‹ å®é™…å¯åŠ¨é¡ºåº
1. **Redisç¼“å­˜æœåŠ¡** (6380) - åŸºç¡€è®¾æ–½
2. **é…ç½®ä¸­å¿ƒæœåŠ¡** (8082) - é…ç½®ç®¡ç†
3. **è®¤è¯æœåŠ¡** (8084) - ç”¨æˆ·è®¤è¯
4. **AIèŠå¤©æœåŠ¡** (3004) - æ ¸å¿ƒä¸šåŠ¡
5. **åº”ç”¨ç«¯å‰ç«¯** (8081) - ç”¨æˆ·ç•Œé¢

### â±ï¸ å¯åŠ¨é—´éš”
- Rediså¯åŠ¨ç­‰å¾…: 3ç§’
- åç«¯æœåŠ¡é—´éš”: 5ç§’
- å‰ç«¯æœåŠ¡å¯åŠ¨: 10ç§’
- å¥åº·æ£€æŸ¥ç­‰å¾…: 15ç§’

---

## ğŸ”§ é…ç½®æ–‡ä»¶ä½ç½®

### åç«¯æœåŠ¡é…ç½® (å½“å‰è¿è¡Œ)
```
backend/nodejs/
â”œâ”€â”€ chat-service.js                    # ç«¯å£3004 âœ…
â”œâ”€â”€ lightweight-config-service.js      # ç«¯å£8082 âœ…
â”œâ”€â”€ auth-service.js                    # ç«¯å£8084 âœ…
â”œâ”€â”€ api-gateway.js                     # ç«¯å£8085 (é¢„ç•™)
â””â”€â”€ advanced-features-service.js       # ç«¯å£3005 (é¢„ç•™)
```

### å‰ç«¯æœåŠ¡é…ç½®
```
frontend/
â”œâ”€â”€ åº”ç”¨ç«¯/                           # ç«¯å£8081 âœ…
â”‚   â”œâ”€â”€ vite.config.js               # Viteé…ç½®
â”‚   â””â”€â”€ package.json                 # ä¾èµ–ç®¡ç†
â”œâ”€â”€ é…ç½®ç«¯/                           # ç«¯å£8083 (é¢„ç•™)
â”‚   â”œâ”€â”€ vue.config.js                # Vue CLIé…ç½®
â”‚   â””â”€â”€ package.json                 # ä¾èµ–ç®¡ç†
â””â”€â”€ é…ç½®é©±åŠ¨ç«¯/                       # ç«¯å£8090 (é¢„ç•™)
```

### åŸºç¡€è®¾æ–½é…ç½®
```
config/
â”œâ”€â”€ redis/
â”‚   â””â”€â”€ redis-persistent.conf        # Redisé…ç½® (ç«¯å£6380)
â””â”€â”€ data/
    â”œâ”€â”€ ai_models.json               # AIæ¨¡å‹é…ç½®
    â”œâ”€â”€ services.json                # æœåŠ¡é…ç½®
    â””â”€â”€ system.json                  # ç³»ç»Ÿé…ç½®
```

---

## ğŸ¥ å¥åº·æ£€æŸ¥ç«¯ç‚¹

| æœåŠ¡ | å¥åº·æ£€æŸ¥URL | é¢„æœŸå“åº” | çŠ¶æ€ |
|------|-------------|----------|------|
| AIèŠå¤©æœåŠ¡ | `http://localhost:3004/health` | `{"status":"ok","service":"chat"}` | âœ… |
| é…ç½®ä¸­å¿ƒ | `http://localhost:8082/health` | `{"status":"ok","service":"config"}` | âœ… |
| è®¤è¯æœåŠ¡ | `http://localhost:8084/health` | `{"status":"ok","service":"auth"}` | âœ… |
| åº”ç”¨ç«¯å‰ç«¯ | `http://localhost:8081/` | é¡µé¢æ­£å¸¸åŠ è½½ | âœ… |
| Redisç¼“å­˜ | ç«¯å£6380è¿æ¥æµ‹è¯• | è¿æ¥æˆåŠŸ | âœ… |

---

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

### ğŸ”’ ç«¯å£å®‰å…¨ç­–ç•¥
- **å†…éƒ¨ç«¯å£**: 3000-3999 (ä»…å†…ç½‘è®¿é—®)
- **å…¬å¼€ç«¯å£**: 8070-8099 (å¯å¤–ç½‘è®¿é—®)
- **ç®¡ç†ç«¯å£**: 8080-8089 (éœ€è¦è®¤è¯)

### ğŸš« é˜²ç«å¢™è§„åˆ™
```bash
# å…è®¸å‰ç«¯ç«¯å£
ufw allow 8073
ufw allow 8082

# å…è®¸APIç½‘å…³
ufw allow 8080

# é™åˆ¶åç«¯ç«¯å£ä»…å†…ç½‘è®¿é—®
ufw allow from 192.168.0.0/16 to any port 3004
ufw allow from 192.168.0.0/16 to any port 3005
ufw allow from 192.168.0.0/16 to any port 3009
```

---

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ğŸ“ˆ ç›‘æ§æŒ‡æ ‡
- **ç«¯å£è¿æ¥æ•°**: æ¯ä¸ªç«¯å£çš„æ´»è·ƒè¿æ¥
- **å“åº”æ—¶é—´**: å¥åº·æ£€æŸ¥å“åº”æ—¶é—´
- **é”™è¯¯ç‡**: æœåŠ¡é”™è¯¯å“åº”æ¯”ä¾‹
- **èµ„æºä½¿ç”¨**: CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µ

### ğŸ”” å‘Šè­¦é˜ˆå€¼
- å“åº”æ—¶é—´ > 5ç§’
- é”™è¯¯ç‡ > 5%
- è¿æ¥æ•° > 1000
- CPUä½¿ç”¨ç‡ > 80%

---

## ğŸ”„ æ‰©å±•è§„åˆ’

### ğŸ“… æœªæ¥ç«¯å£åˆ†é…
- **å¾®æœåŠ¡æ‰©å±•**: 3010-3020
- **å‰ç«¯æ¨¡å—**: 8090-8099
- **ç¬¬ä¸‰æ–¹é›†æˆ**: 9000-9099
- **æµ‹è¯•ç¯å¢ƒ**: 7000-7999

### ğŸ¯ å®¹å™¨åŒ–ç«¯å£æ˜ å°„
```yaml
services:
  qms-chat:
    ports: ["3004:3004"]
  qms-config:
    ports: ["3005:3005"]
  qms-frontend-config:
    ports: ["8073:80"]
  qms-frontend-app:
    ports: ["8082:80"]
```
