# TrDict 字典选择框

### 组件说明

这是一个业务组件，是为了解决字典选择而设定了。鉴于字典在页面中使用的很频繁，主要是做了以下工作：

1. 统一系统中字典接口的数据结构，每个字典项对应一个 type 值。后端接口
2. 简化字典项，只填 type 参数
3. 全局管理字典项，增加缓存机制
4. 增加防抖机制，合并字典“请求”

### 注意点

1. 字典增加了缓存机制，且是放在 store 里面，故与业务进行了强耦合。在项目开始阶段配置一下，后面的爽歪歪
2. 一个系统的字典请求只应有一个接口，需要先修改@/api/dict 中的 getDictByType 方法。后端接口的参数需要兼容“逗号分隔的字符串”， 比如"type1,type2"
3. 若添加新的字典项，需要在 `src/store/modules/dict.js` 中的 dicts 添加对应的 type 字符串
4. 每种语言对应请求返回结果中的每个属性，可以在 `src/store/modules/dict.js` 中的 valueFieldMap 进行修改

### Dict Attribute
| 参数      | 说明                            | 类型                       | 默认值 |
| --------- | ------------------------------ | ------------------------- | ----- |
| value     | 表单数据值                      | String/Number/Array/Object | ''    |
| type      | 字典类型值，每个字典项对应一个类型 | String                     | ----- |
| clearable | 清空选项值                      | Boolean                    | ----- |

### Events
| 参数名 | 说明            | 参数             |
| ----- | --------------- | --------------- |
| input | 数据值更新时触发  | Function(value) |