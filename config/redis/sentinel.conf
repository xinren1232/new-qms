# Redis Sentinel配置
# QMS-AI系统高可用配置

# 基本设置
port 26379
bind 0.0.0.0
protected-mode no

# 日志设置
logfile /var/log/redis/sentinel.log
loglevel notice

# 工作目录
dir /tmp

# 监控主节点
# sentinel monitor <master-name> <ip> <redis-port> <quorum>
sentinel monitor mymaster redis-master 6379 1

# 主节点密码（如果设置了密码）
# sentinel auth-pass mymaster yourpassword

# 故障转移超时时间（毫秒）
sentinel down-after-milliseconds mymaster 5000

# 故障转移超时
sentinel failover-timeout mymaster 10000

# 并行同步的从节点数量
sentinel parallel-syncs mymaster 1

# 拒绝连接时间
sentinel deny-scripts-reconfig yes

# 通知脚本
# sentinel notification-script mymaster /var/redis/notify.sh

# 客户端重新配置脚本
# sentinel client-reconfig-script mymaster /var/redis/reconfig.sh

# 其他配置
# sentinel announce-ip <ip>
# sentinel announce-port <port>

# 日志级别
# debug, verbose, notice, warning
loglevel notice

# 是否以守护进程运行
daemonize no

# PID文件
pidfile /var/run/redis-sentinel.pid
