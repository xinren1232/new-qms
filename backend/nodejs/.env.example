# QMS-AI后端服务环境配置

# 应用配置
NODE_ENV=development
PORT=3004

# 数据库配置
# 数据库类型: sqlite 或 postgresql
DB_TYPE=sqlite

# PostgreSQL配置 (当DB_TYPE=postgresql时使用)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=qms
DB_USER=qms_app
DB_PASSWORD=qms123

# Redis缓存配置
CACHE_ENABLED=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# AI服务配置
# 内部模型API配置（传音内部代理，支持6个模型）
INTERNAL_AI_API_KEY=your_internal_api_key_here
INTERNAL_AI_BASE_URL=https://hk-intra-paas.transsion.com/tranai-proxy/v1

# 外部模型API配置（DeepSeek等外网API）
EXTERNAL_AI_API_KEY=your_external_api_key_here
EXTERNAL_AI_BASE_URL=https://api.deepseek.com

# 兼容性配置（向后兼容）
AI_API_KEY=your_internal_api_key_here
AI_BASE_URL=https://hk-intra-paas.transsion.com/tranai-proxy/v1
DEEPSEEK_API_KEY=your_external_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com

# 安全配置
JWT_SECRET=qms-ai-super-secret-key-change-in-production-2024
JWT_EXPIRES_IN=24h
CORS_ORIGIN=http://localhost:8080,http://localhost:8072
CORS_CREDENTIALS=true

# API限流配置
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AI_RATE_LIMIT_MAX_REQUESTS=20

# 日志配置
LOG_LEVEL=info
LOG_FILE=logs/qms-ai.log

# 性能配置
MAX_CONNECTIONS=20
CONNECTION_TIMEOUT=2000
QUERY_TIMEOUT=30000

# 缓存TTL配置 (秒)
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_CONVERSATIONS=1800
CACHE_TTL_STATS=300
CACHE_TTL_MODELS=3600

# 文件上传配置
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=.txt,.md,.doc,.docx,.pdf

# 监控配置
HEALTH_CHECK_INTERVAL=30000
METRICS_ENABLED=true
